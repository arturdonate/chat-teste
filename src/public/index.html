<!--frontend-->

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js" integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k" crossorigin="anonymous"></script>
     
    <title>ESTUDO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <style>
        #mensagens {
            height: 500px;
            overflow: auto;
        }
    </style>
   
   <script>
        const socket = io ('https://arturdonate.github.io',{
        transports : ['websocket']
        });

        socket.on('teste', (res) => {
        escreverMensagem( res.usuario, res.mensagem);//chamando a mensagem

        console.log(res);
        });

        function enviar (){ 
        const usuario = document.querySelector('#usuario').value;
        const mensagem=document.querySelector('#mensagem').value;
            socket.emit ('teste', {
                usuario, mensagem
            }); 
        escreverMensagem('EU', mensagem);//chamando a mensagem
        
        }; //com o ENVIAR no console do google recebemos informações no terminal
       
            function escreverMensagem(usuario, mensagem){
            
            let bg = usuario === 'EU' ? 'alert-light' : 'alert-success text-end';  

            let mensagemhtml = document.querySelector('#mensagens').innerHTML;
            mensagemhtml+= `<div class="alert ${bg}">
                <h1 class="m-0">${usuario}<h2>
                    <p class="m-0">${mensagem}</p>
                    </div>`
            document.querySelector('#mensagens').scrollTo(0, document.body.scrollHeight);//forca a executar até o finalgit        
            document.querySelector('#mensagens').innerHTML=mensagemhtml; //toda vez q for digitado uma msg sera redirecionado prsa tela
            document.querySelector('#mensagem').value ='';
        }
   </script>
</head>
<body>
<div class="container">
    <h3 class="mt-3">Chat Teste</h3>
    <hr>
<div class="row mb-3">
     <div class="col-4">
    <label for="usuario">Informe seu usuário</label>
    <input id="usuario" class="form-control" placeholder="Digite o usuário">
     
    </div>

</div>
    
<div class="card">
<div id="mensagens" class="card-body">
   
 
</div>
<div class="card-footer">
    <textarea class="form-control form-control-lg" id="mensagem" ></textarea>
    <br>
    <button class="btn btn-success w-100" onclick="enviar()">ENVIAR</button>
</div>
</div>
   
</div>
</body>
</html>   